{% extends "base.html" %} 
 
{% block title %}Сессия {{ session.id }} - CodeSync{% endblock %} 
 
{% block content %} 
<div class="editor-grid"> 
    <div class="control-panel"> 
        <a href="{{ url_for('main.index') }}" class="btn 
btn-outline-secondary me-3"><i class="bi bi-arrow-left"></i> На 
главную</a> 
        <div class="input-group me-3" style="max-width: 250px;"> 
            <label class="input-group-text" for="languageSelect"><i 
class="bi bi-code-slash"></i></label> 
            <select class="form-select" id="languageSelect"> 
                {% for key, lang in languages.items() %} 
                <option value="{{ key }}" {% if key == 
session.language %}selected{% endif %}>{{ lang.name }}</option> 
                {% endfor %} 
            </select> 
        </div> 
        <button id="run-code-btn" class="btn btn-primary"><i class="bi 
bi-play-fill"></i> Выполнить</button> 
        <div class="ms-auto d-flex align-items-center"> 
            <span class="me-2">ID сессии:</span> 
            <input type="text" readonly class="form-control 
form-control-sm" value="{{ session.id }}" id="sessionIdInput" 
style="max-width: 150px;"> 
            <button class="btn btn-sm btn-outline-secondary ms-1" 
id="copySessionId"><i class="bi bi-clipboard"></i></button> 
        </div> 
    </div> 
 
    <div id="editor-pane"> 
        <div id="editor"></div> 
    </div> 
 
    <div id="drag-bar"></div> 
 
    <div id="bottom-pane"> 
        <ul class="nav nav-tabs" id="bottom-tabs" role="tablist"> 
            <li class="nav-item" role="presentation"> 
                <button class="nav-link active" id="output-tab" 
data-bs-toggle="tab" data-bs-target="#output-panel" type="button" 
role="tab">Вывод</button> 
            </li> 
            <li class="nav-item" role="presentation"> 
                <button class="nav-link" id="chat-tab" 
data-bs-toggle="tab" data-bs-target="#chat-panel" type="button" 
role="tab">Чат</button> 
            </li> 
            <li class="nav-item" role="presentation"> 
                <button class="nav-link" id="users-tab" 
data-bs-toggle="tab" data-bs-target="#users-panel" type="button" 
role="tab">Участники (<span id="user-count">0</span>)</button> 
            </li> 
        </ul> 
        <div class="tab-content h-100"> 
            <div class="tab-pane fade show active h-100" 
id="output-panel" role="tabpanel"> 
                <pre id="output-content">{{ session.output }}</pre> 
            </div> 
            <div class="tab-pane fade h-100 d-flex flex-column" 
id="chat-panel" role="tabpanel"> 
                <div id="chat-messages" class="flex-grow-1"></div> 
                <div class="input-group p-2"> 
                    <input type="text" id="chat-input" 
class="form-control" placeholder="Введите сообщение..."> 
                    <button id="send-chat-btn" class="btn 
btn-outline-secondary">Отправить</button> 
                </div> 
            </div> 
            <div class="tab-pane fade p-3" id="users-panel" 
role="tabpanel"> 
                <ul id="user-list" class="list-group"></ul> 
            </div> 
        </div> 
    </div> 
</div> 
{% endblock %} 
 
{% block scripts %} 
<script 
src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.15/codemir
 ror.min.js"></script> 
<script 
src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.15/addon/m
 ode/loadmode.min.js"></script> 
<script 
src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.15/mode/me
 ta.js"></script> 
<link rel="stylesheet" 
href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.15/codemi
 rror.min.css"> 
<link rel="stylesheet" 
href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.15/theme/
 dracula.min.css"> 
 
<script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script> 
 
<script> 
    const SESSION_ID = "{{ session.id }}"; 
    const INITIAL_CODE = {{ session.code|tojson }}; 
    const INITIAL_LANGUAGE = "{{ session.language }}"; 
</script> 
<script src="{{ url_for('static', filename='js/editor.js') 
}}"></script> 
{% endblock %}